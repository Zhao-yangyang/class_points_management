<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>班级积分管理系统</title>
    <!-- 引入本地Material Icons字体 -->
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    <!-- 引入本地Tailwind CSS -->
    <script src="assets/libs/tailwind.min.js"></script>
    <!-- 自定义CSS变量和Tailwind配置 -->
    <style>
      :root {
        --color-primary: #FF85A2;      /* 温柔粉色为主色调 */
        --color-secondary: #7EB2DD;    /* 淡蓝色为辅助色 */
        --color-accent: #B8E0D2;       /* 薄荷绿为强调色 */
        --color-neutral: #F8F9FA;      /* 浅灰色作为背景 */
        --color-neutral-dark: #DEE2E6;  /* 深一点的灰色作为分隔 */
        --color-primary-dark: #E06B87;  /* 主色调的深色版本 */
        --color-secondary-dark: #6799C0;  /* 辅助色的深色版本 */
        --color-accent-dark: #92C7B6;  /* 强调色的深色版本 */
      }
    </style>
    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="assets/css/styles.css">
    <!-- 引入本地Chart.js -->
    <script src="assets/libs/chart.min.js"></script>
</head>
<body class="bg-neutral min-h-screen flex flex-col">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-md fixed top-0 left-0 right-0 z-10">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-primary text-xl font-bold cursor-pointer" id="app-title">班级积分管理系统</h1>
            <nav class="flex space-x-1 md:space-x-4">
                <button id="nav-students" class="btn-nav hover:bg-primary hover:text-white">学生管理</button>
                <button id="nav-points" class="btn-nav hover:bg-primary hover:text-white">积分管理</button>
                <button id="nav-stats" class="btn-nav hover:bg-primary hover:text-white">数据统计</button>
                <button id="nav-rewards" class="btn-nav hover:bg-primary hover:text-white">奖励兑换</button>
                <button id="nav-settings" class="btn-nav hover:bg-primary hover:text-white">系统设置</button>
            </nav>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex-grow container mx-auto p-4 mt-16 mb-12">
        <!-- 各模块内容将通过JavaScript动态加载 -->
        <div id="content-container">
            <!-- 默认显示欢迎页面/仪表盘 -->
            <div id="welcome-page" class="py-2 max-h-[calc(100vh-9rem)] overflow-y-auto">
                <!-- 顶部摘要卡片 -->
                <div class="mb-4 grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-white rounded-xl shadow-md p-4 border-l-4 border-primary">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500 text-sm">班级总人数</p>
                                <h3 id="dashboard-total-students" class="text-2xl font-bold text-gray-800">0</h3>
                            </div>
                            <div class="bg-primary p-3 rounded-full w-14 h-14 flex items-center justify-center shadow-sm">
                                <i class="material-icons text-white" style="font-size: 32px;">people</i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-4 border-l-4 border-secondary">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500 text-sm">小组数量</p>
                                <h3 id="dashboard-total-groups" class="text-2xl font-bold text-gray-800">0</h3>
                            </div>
                            <div class="bg-secondary p-3 rounded-full w-14 h-14 flex items-center justify-center shadow-sm">
                                <i class="material-icons text-white" style="font-size: 32px;">groups</i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-4 border-l-4 border-accent">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500 text-sm">班级总积分</p>
                                <h3 id="dashboard-total-points" class="text-2xl font-bold text-gray-800">0</h3>
                            </div>
                            <div class="bg-accent p-3 rounded-full w-14 h-14 flex items-center justify-center shadow-sm">
                                <i class="material-icons text-white" style="font-size: 32px;">stars</i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-4 border-l-4 border-green-500">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500 text-sm">平均积分</p>
                                <h3 id="dashboard-avg-points" class="text-2xl font-bold text-gray-800">0</h3>
                            </div>
                            <div class="bg-green-500 p-3 rounded-full w-14 h-14 flex items-center justify-center shadow-sm">
                                <i class="material-icons text-white" style="font-size: 32px;">bar_chart</i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 学生列表与快速积分操作区域 -->
                <div class="mb-4">
                    <div class="bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">学生积分管理</h2>
                            <div class="flex space-x-2">
                                <div class="relative">
                                    <input type="text" id="quick-student-search" placeholder="搜索学生..." 
                                        class="px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm">
                                    <i class="material-icons absolute right-2 top-2 text-gray-400" style="font-size: 20px;">search</i>
                                </div>
                                <select id="quick-group-filter" class="px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm">
                                    <option value="">所有小组</option>
                                    <!-- 小组选项将通过JavaScript动态生成 -->
                                </select>
                                <button id="quick-group-point-btn" class="btn btn-primary text-sm">
                                    <i class="material-icons mr-1" style="font-size: 16px;">group_add</i>小组积分
                                </button>
                                <button id="view-stats-btn" class="btn btn-secondary text-sm">
                                    <i class="material-icons mr-1" style="font-size: 16px;">analytics</i>查看统计
                                </button>
                            </div>
                        </div>
                        
                        <!-- 快速积分规则选择 -->
                        <div class="mb-4 p-3 bg-neutral rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-sm font-medium text-gray-700">快速积分规则</h3>
                                <button id="cancel-rule-selection" class="hidden text-xs text-red-500 hover:text-red-700">
                                    取消选择
                                </button>
                            </div>
                            <div id="quick-rule-buttons" class="flex flex-wrap gap-2">
                                <!-- 积分规则按钮将通过JavaScript动态生成 -->
                                <div class="animate-pulse h-8 w-20 bg-gray-200 rounded-full"></div>
                                <div class="animate-pulse h-8 w-24 bg-gray-200 rounded-full"></div>
                                <div class="animate-pulse h-8 w-22 bg-gray-200 rounded-full"></div>
                            </div>
                        </div>
                        
                        <!-- 学生列表表格 -->
                        <div class="overflow-x-auto rounded-lg border border-gray-200">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th class="px-4 py-4 font-semibold text-gray-700">姓名</th>
                                        <th class="px-4 py-4 font-semibold text-gray-700">学号</th>
                                        <th class="px-4 py-4 font-semibold text-gray-700">小组</th>
                                        <th class="px-4 py-4 text-center font-semibold text-gray-700">当前积分</th>
                                        <th class="px-4 py-4 text-center font-semibold text-gray-700">快速操作</th>
                                        <th class="px-4 py-4 text-right font-semibold text-gray-700">详细操作</th>
                                    </tr>
                                </thead>
                                <tbody id="student-points-table" class="bg-white">
                                    <!-- 学生列表将通过JavaScript动态生成 -->
                                    <tr class="animate-pulse border-b border-gray-100">
                                        <td class="px-4 py-4"><div class="h-5 bg-gray-200 rounded w-20"></div></td>
                                        <td class="px-4 py-4"><div class="h-4 bg-gray-200 rounded w-16"></div></td>
                                        <td class="px-4 py-4"><div class="h-4 bg-gray-200 rounded w-12"></div></td>
                                        <td class="px-4 py-4 text-center"><div class="h-6 bg-gray-200 rounded w-8 mx-auto"></div></td>
                                        <td class="px-4 py-4 text-center">
                                            <div class="flex items-center justify-center space-x-3">
                                                <div class="h-8 w-8 bg-gray-200 rounded-full"></div>
                                                <div class="h-8 w-8 bg-gray-200 rounded-full"></div>
                                            </div>
                                        </td>
                                        <td class="px-4 py-4 text-right"><div class="h-8 bg-gray-200 rounded-lg w-20 ml-auto"></div></td>
                                    </tr>
                                    <tr class="animate-pulse border-b border-gray-100">
                                        <td class="px-4 py-4"><div class="h-5 bg-gray-200 rounded w-24"></div></td>
                                        <td class="px-4 py-4"><div class="h-4 bg-gray-200 rounded w-16"></div></td>
                                        <td class="px-4 py-4"><div class="h-4 bg-gray-200 rounded w-14"></div></td>
                                        <td class="px-4 py-4 text-center"><div class="h-6 bg-gray-200 rounded w-8 mx-auto"></div></td>
                                        <td class="px-4 py-4 text-center">
                                            <div class="flex items-center justify-center space-x-3">
                                                <div class="h-8 w-8 bg-gray-200 rounded-full"></div>
                                                <div class="h-8 w-8 bg-gray-200 rounded-full"></div>
                                            </div>
                                        </td>
                                        <td class="px-4 py-4 text-right"><div class="h-8 bg-gray-200 rounded-lg w-20 ml-auto"></div></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- 底部区域：最近积分记录 -->
                <div class="bg-white rounded-xl shadow-md p-4">
                    <div class="flex justify-between items-center mb-2">
                        <h2 class="text-lg font-medium text-gray-800">最近积分记录</h2>
                        <button id="more-logs-btn" class="text-sm text-primary hover:underline">查看全部</button>
                    </div>
                    <div id="recent-points-logs" class="max-h-[200px] overflow-y-auto">
                        <!-- 积分记录将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
            
            <!-- 学生管理页面 -->
            <div id="students-page" class="hidden">
                <div class="flex flex-col md:flex-row gap-4">
                    <!-- 左侧学生管理面板（主区域） -->
                    <div class="w-full md:w-2/3 bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">学生管理</h2>
                            <button id="add-student-btn" class="btn btn-primary btn-sm btn-rounded btn-icon">
                                <span>添加学生</span>
                            </button>
                        </div>
                        
                        <!-- 学生搜索 -->
                        <div class="relative mb-4">
                            <input type="text" id="student-search" placeholder="搜索学生姓名或学号..." 
                                class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        
                        <!-- 学生列表 -->
                        <div id="student-list" class="grid grid-cols-1 md:grid-cols-3 gap-2 py-3 px-1">
                            <!-- 学生卡片将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 右侧小组管理面板（侧边栏） -->
                    <div class="w-full md:w-1/3 bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">小组管理</h2>
                            <button id="add-group-btn" class="btn btn-primary btn-sm btn-rounded btn-icon">
                                <span>添加小组</span>
                            </button>
                        </div>
                        
                        <!-- 小组列表 -->
                        <div id="group-list" class="grid grid-cols-1 gap-4">
                            <!-- 小组卡片将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
                
                <!-- 学生添加/编辑模态框 -->
                <div id="student-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 id="student-modal-title" class="text-lg font-medium text-gray-800 mb-4">添加学生</h3>
                        <form id="student-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="student-name" class="block text-sm font-medium text-gray-700 mb-1">姓名</label>
                                    <input type="text" id="student-name" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div>
                                    <label for="student-id" class="block text-sm font-medium text-gray-700 mb-1">学号</label>
                                    <input type="text" id="student-id" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div>
                                    <label for="student-gender" class="block text-sm font-medium text-gray-700 mb-1">性别</label>
                                    <select id="student-gender" 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="男">男</option>
                                        <option value="女">女</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="student-group" class="block text-sm font-medium text-gray-700 mb-1">所属小组</label>
                                    <select id="student-group" 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="">无小组</option>
                                        <!-- 小组选项将通过JavaScript动态生成 -->
                                    </select>
                                </div>
                            </div>
                            <div class="flex justify-end space-x-2 mt-6">
                                <button type="button" id="student-modal-cancel" 
                                    class="btn btn-outline">
                                    取消
                                </button>
                                <button type="submit" 
                                    class="btn btn-primary">
                                    保存
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 小组添加/编辑模态框 -->
                <div id="group-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 id="group-modal-title" class="text-lg font-medium text-gray-800 mb-4">添加小组</h3>
                        <form id="group-form">
                            <div>
                                <label for="group-name" class="block text-sm font-medium text-gray-700 mb-1">小组名称</label>
                                <input type="text" id="group-name" required 
                                    class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary">
                            </div>
                            <div class="flex justify-end space-x-2 mt-6">
                                <button type="button" id="group-modal-cancel" 
                                    class="btn btn-outline">
                                    取消
                                </button>
                                <button type="submit" 
                                    class="btn btn-secondary">
                                    保存
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 批量导入学生模态框 -->
                <div id="import-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">批量导入学生</h3>
                        <p class="text-sm text-gray-600 mb-4">请上传CSV或TXT文件，文件格式要求：</p>
                        <ul class="text-sm text-gray-600 mb-4 pl-5 list-disc">
                            <li>CSV格式：姓名,学号,性别,小组名称</li>
                            <li>TXT格式：每行一条记录，字段间用逗号或Tab键分隔</li>
                            <li>系统支持自动识别编码，无需手动转换文件编码</li>
                        </ul>
                        <input type="file" id="import-file" accept=".csv,.txt" 
                            class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        <div class="flex justify-end space-x-2 mt-6">
                            <button type="button" id="import-modal-cancel" 
                                class="btn btn-outline">
                                取消
                            </button>
                            <button type="button" id="import-modal-submit" 
                                class="btn btn-primary">
                                导入
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 导出格式选择模态框 -->
                <div id="export-format-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">选择导出格式</h3>
                        <p class="text-sm text-gray-600 mb-4">请选择要导出的文件格式：</p>
                        
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input type="radio" id="format-csv" name="export-format" value="csv" checked 
                                    class="mr-3 h-4 w-4 text-primary focus:ring-primary">
                                <label for="format-csv" class="flex-1">
                                    <div class="font-medium text-gray-800">CSV格式</div>
                                    <div class="text-xs text-gray-500">适用于Excel、Numbers等电子表格软件</div>
                                </label>
                            </div>
                            
                            <div class="flex items-center">
                                <input type="radio" id="format-txt" name="export-format" value="txt" 
                                    class="mr-3 h-4 w-4 text-primary focus:ring-primary">
                                <label for="format-txt" class="flex-1">
                                    <div class="font-medium text-gray-800">TXT格式</div>
                                    <div class="text-xs text-gray-500">使用逗号分隔符，与导入格式保持一致</div>
                                </label>
                            </div>
                            
                            <div class="flex items-center">
                                <input type="radio" id="format-json" name="export-format" value="json" 
                                    class="mr-3 h-4 w-4 text-primary focus:ring-primary">
                                <label for="format-json" class="flex-1">
                                    <div class="font-medium text-gray-800">JSON格式</div>
                                    <div class="text-xs text-gray-500">包含完整数据结构，适用于开发者或数据分析</div>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-end space-x-2 mt-6">
                            <button type="button" id="export-format-cancel" 
                                class="btn btn-outline">
                                取消
                            </button>
                            <button type="button" id="export-format-submit" 
                                class="btn btn-primary">
                                确认导出
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 功能菜单 -->
                <div class="flex justify-end mt-4 gap-2">
                    <button id="import-students-btn" class="btn btn-accent btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                        </svg>
                        批量导入
                    </button>
                    <button id="export-students-btn" class="btn btn-accent btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                        </svg>
                        导出学生
                    </button>
                    <button id="export-points-btn" class="btn btn-accent btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                        </svg>
                        导出积分记录
                    </button>
                </div>
            </div>
            
            <!-- 积分管理页面 -->
            <div id="points-page" class="hidden">
                <div class="flex flex-col md:flex-row gap-4">
                    <!-- 左侧积分规则管理 -->
                    <div class="w-full md:w-1/3 bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">积分规则</h2>
                            <button id="add-rule-btn" class="btn btn-primary btn-sm btn-rounded btn-icon">
                                <span>添加规则</span>
                            </button>
                        </div>
                        
                        <!-- 积分规则列表 -->
                        <div id="rule-list" class="space-y-2 max-h-[60vh] overflow-y-auto">
                            <!-- 积分规则卡片将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 右侧积分操作区域 -->
                    <div class="w-full md:w-2/3 bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">积分操作</h2>
                            <div class="flex gap-2">
                                <button id="student-point-btn" class="btn btn-primary btn-sm btn-rounded">单人积分</button>
                                <button id="group-point-btn" class="btn btn-primary btn-sm btn-rounded">小组积分</button>
                            </div>
                        </div>
                        
                        <!-- 积分操作区域 -->
                        <div id="point-operation" class="mb-4">
                            <div class="bg-neutral rounded-lg p-4">
                                <h3 class="text-md font-medium text-gray-700 mb-3">操作说明</h3>
                                <p class="text-sm text-gray-600">
                                    选择左侧的积分规则和上方的操作类型，然后在下方选择学生或小组进行积分操作。
                                </p>
                            </div>
                        </div>
                        
                        <!-- 最近积分记录 -->
                        <div>
                            <h3 class="text-md font-medium text-gray-800 mb-2">最近积分记录</h3>
                            <div id="recent-points" class="space-y-2 max-h-[40vh] overflow-y-auto">
                                <!-- 积分记录将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 积分规则添加/编辑模态框 -->
                <div id="rule-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 id="rule-modal-title" class="text-lg font-medium text-gray-800 mb-4">添加积分规则</h3>
                        <form id="rule-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="rule-name" class="block text-sm font-medium text-gray-700 mb-1">规则名称</label>
                                    <input type="text" id="rule-name" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div>
                                    <label for="rule-points" class="block text-sm font-medium text-gray-700 mb-1">分值</label>
                                    <input type="number" id="rule-points" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <p class="text-xs text-gray-500 mt-1">正数表示加分，负数表示减分</p>
                                </div>
                                <div>
                                    <label for="rule-description" class="block text-sm font-medium text-gray-700 mb-1">描述</label>
                                    <textarea id="rule-description" rows="3" 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                                </div>
                            </div>
                            <div class="flex justify-end space-x-2 mt-6">
                                <button type="button" id="rule-modal-cancel" 
                                    class="btn btn-outline">
                                    取消
                                </button>
                                <button type="submit" 
                                    class="btn btn-primary">
                                    保存
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 单人积分操作模态框 -->
                <div id="student-point-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">单人积分操作</h3>
                        <form id="student-point-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="point-student" class="block text-sm font-medium text-gray-700 mb-1">选择学生</label>
                                    <select id="point-student" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="">选择学生...</option>
                                        <!-- 学生选项将通过JavaScript动态生成 -->
                                    </select>
                                </div>
                                <div>
                                    <label for="point-rule" class="block text-sm font-medium text-gray-700 mb-1">选择积分规则</label>
                                    <select id="point-rule" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="">选择规则...</option>
                                        <!-- 规则选项将通过JavaScript动态生成 -->
                                    </select>
                                </div>
                                <div>
                                    <label for="point-reason" class="block text-sm font-medium text-gray-700 mb-1">备注</label>
                                    <input type="text" id="point-reason" 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
                                        placeholder="可选，记录积分原因">
                                </div>
                            </div>
                            <div class="flex justify-end space-x-2 mt-6">
                                <button type="button" id="student-point-modal-cancel" 
                                    class="btn btn-outline">
                                    取消
                                </button>
                                <button type="submit" 
                                    class="btn btn-secondary">
                                    确认积分
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 移除重复的小组积分操作模态框，使用全局模态框替代 -->
            </div>
            
            <!-- 统计分析页面 -->
            <div id="stats-page" class="hidden">
                <div class="flex flex-col md:flex-row gap-4">
                    <!-- 左侧数据概览 -->
                    <div class="w-full md:w-1/3 space-y-4">
                        <!-- 班级统计卡片 -->
                        <div class="bg-white rounded-xl shadow-md p-4">
                            <h2 class="text-lg font-medium text-gray-800 mb-3">班级数据概览</h2>
                            <div class="space-y-2">
                                <div class="flex justify-between py-2 border-b border-neutral-dark">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                        </svg>
                                    <span class="text-gray-600">班级总人数</span>
                                    </div>
                                    <span id="stats-total-students" class="font-medium text-gray-800">0</span>
                                </div>
                                <div class="flex justify-between py-2 border-b border-neutral-dark">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-secondary mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />
                                        </svg>
                                    <span class="text-gray-600">小组数量</span>
                                    </div>
                                    <span id="stats-total-groups" class="font-medium text-gray-800">0</span>
                                </div>
                                <div class="flex justify-between py-2 border-b border-neutral-dark">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-accent mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    <span class="text-gray-600">总积分</span>
                                    </div>
                                    <span id="stats-total-points" class="font-medium text-gray-800">0</span>
                                </div>
                                <div class="flex justify-between py-2">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                        </svg>
                                    <span class="text-gray-600">平均积分</span>
                                    </div>
                                    <span id="stats-avg-points" class="font-medium text-gray-800">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 积分区间分布 -->
                        <div class="bg-white rounded-xl shadow-md p-4">
                            <h2 class="text-lg font-medium text-gray-800 mb-3">积分区间分布</h2>
                            <div class="space-y-3" id="stats-point-distribution">
                                <!-- 积分区间将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧图表和排行榜 -->
                    <div class="w-full md:w-2/3 space-y-4">
                        <!-- 积分趋势图 -->
                        <div class="bg-white rounded-xl shadow-md p-4">
                            <h2 class="text-lg font-medium text-gray-800 mb-3">积分趋势</h2>
                            <div class="h-64">
                                <canvas id="points-trend-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- 排行榜 -->
                        <div class="bg-white rounded-xl shadow-md p-4">
                            <div class="flex justify-between items-center mb-3">
                                <h2 class="text-lg font-medium text-gray-800">积分排行榜</h2>
                                <div>
                                    <select id="rank-type" class="px-3 py-1 border border-neutral-dark rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="student">学生排名</option>
                                        <option value="group">小组排名</option>
                                    </select>
                                </div>
                            </div>
                            <div id="rank-container" class="max-h-[50vh] overflow-y-auto">
                                <!-- 排行榜将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 奖励兑换页面 -->
            <div id="rewards-page" class="hidden">
                <div class="flex flex-col md:flex-row gap-4">
                    <!-- 左侧奖品管理面板 -->
                    <div class="w-full md:w-1/3 bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">奖品管理</h2>
                            <button id="add-reward-btn" class="btn btn-primary btn-sm btn-rounded btn-icon">
                                <span>添加奖品</span>
                            </button>
                        </div>
                        
                        <!-- 奖品列表 -->
                        <div id="reward-list" class="space-y-2 max-h-[60vh] overflow-y-auto">
                            <!-- 奖品卡片将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 右侧兑换记录面板 -->
                    <div class="w-full md:w-2/3 bg-white rounded-xl shadow-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-medium text-gray-800">兑换记录</h2>
                            <button id="new-exchange-btn" class="btn btn-primary btn-sm btn-rounded">兑换奖品</button>
                        </div>
                        
                        <!-- 兑换记录列表 -->
                        <div id="exchange-list" class="max-h-[60vh] overflow-y-auto">
                            <!-- 兑换记录将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
                
                <!-- 奖品添加/编辑模态框 -->
                <div id="reward-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 id="reward-modal-title" class="text-lg font-medium text-gray-800 mb-4">添加奖品</h3>
                        <form id="reward-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="reward-name" class="block text-sm font-medium text-gray-700 mb-1">奖品名称</label>
                                    <input type="text" id="reward-name" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div>
                                    <label for="reward-points" class="block text-sm font-medium text-gray-700 mb-1">所需积分</label>
                                    <input type="number" id="reward-points" min="1" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div>
                                    <label for="reward-stock" class="block text-sm font-medium text-gray-700 mb-1">库存数量</label>
                                    <input type="number" id="reward-stock" min="0" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div>
                                    <label for="reward-description" class="block text-sm font-medium text-gray-700 mb-1">描述</label>
                                    <textarea id="reward-description" rows="3" 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                                </div>
                            </div>
                            <div class="flex justify-end space-x-2 mt-6">
                                <button type="button" id="reward-modal-cancel" 
                                    class="btn btn-outline">
                                    取消
                                </button>
                                <button type="submit" 
                                    class="btn btn-primary">
                                    保存
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 积分兑换模态框 -->
                <div id="exchange-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">兑换奖品</h3>
                        <form id="exchange-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="exchange-student" class="block text-sm font-medium text-gray-700 mb-1">学生</label>
                                    <select id="exchange-student" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="">选择学生...</option>
                                        <!-- 学生选项将通过JavaScript动态生成 -->
                                    </select>
                                </div>
                                <div>
                                    <label for="exchange-reward" class="block text-sm font-medium text-gray-700 mb-1">奖品</label>
                                    <select id="exchange-reward" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="">选择奖品...</option>
                                        <!-- 奖品选项将通过JavaScript动态生成 -->
                                    </select>
                                </div>
                                <div>
                                    <label for="exchange-quantity" class="block text-sm font-medium text-gray-700 mb-1">数量</label>
                                    <input type="number" id="exchange-quantity" min="1" value="1" required 
                                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                                <div class="p-4 bg-neutral rounded-lg">
                                    <div class="flex justify-between">
                                        <span class="text-sm font-medium text-gray-700">学生积分</span>
                                        <span id="exchange-student-points" class="text-sm text-gray-800">0</span>
                                    </div>
                                    <div class="flex justify-between mt-2">
                                        <span class="text-sm font-medium text-gray-700">所需积分</span>
                                        <span id="exchange-required-points" class="text-sm text-gray-800">0</span>
                                    </div>
                                    <div class="flex justify-between mt-2 pt-2 border-t border-neutral-dark">
                                        <span class="text-sm font-medium text-gray-700">兑换后剩余</span>
                                        <span id="exchange-remaining-points" class="text-sm text-gray-800">0</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex justify-end space-x-2 mt-6">
                                <button type="button" id="exchange-modal-cancel" 
                                    class="btn btn-outline">
                                    取消
                                </button>
                                <button type="submit" id="exchange-confirm-btn"
                                    class="btn btn-primary">
                                    确认兑换
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- 系统设置页面 -->
            <div id="settings-page" class="hidden">
                <div class="max-w-3xl mx-auto">
                    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
                        <h2 class="text-lg font-medium text-gray-800 mb-4">数据管理</h2>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-4 border border-neutral-dark rounded-lg">
                                <div>
                                    <h3 class="font-medium text-gray-800">备份数据</h3>
                                    <p class="text-sm text-gray-600">将所有数据导出为备份文件</p>
                                </div>
                                <button id="backup-data-btn" class="btn btn-primary">
                                    备份数据
                                </button>
                            </div>
                            
                            <div class="flex justify-between items-center p-4 border border-neutral-dark rounded-lg">
                                <div>
                                    <h3 class="font-medium text-gray-800">恢复数据</h3>
                                    <p class="text-sm text-gray-600">从备份文件恢复数据</p>
                                </div>
                                <button id="restore-data-btn" class="btn btn-primary">
                                    恢复数据
                                </button>
                            </div>
                            
                            <div class="flex justify-between items-center p-4 border border-neutral-dark rounded-lg">
                                <div>
                                    <h3 class="font-medium text-gray-800">优化存储</h3>
                                    <p class="text-sm text-gray-600">优化数据存储格式，节省空间</p>
                                </div>
                                <button id="optimize-storage-btn" class="btn btn-secondary">
                                    优化存储
                                </button>
                            </div>
                            
                            <div class="flex justify-between items-center p-4 border border-neutral-dark rounded-lg">
                                <div>
                                    <h3 class="font-medium text-gray-800">清除所有数据</h3>
                                    <p class="text-sm text-gray-600 text-red-500">危险操作：将删除所有学生、小组和积分数据</p>
                                </div>
                                <button id="clear-data-btn" class="btn btn-danger">
                                    清除数据
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
                        <h2 class="text-lg font-medium text-gray-800 mb-4">系统设置</h2>
                        <form id="settings-form" class="space-y-4">
                            <!-- 存储使用情况 -->
                            <div id="storage-usage-info" class="p-4 bg-neutral rounded-lg">
                                <!-- 将通过JavaScript动态生成 -->
                            </div>
                            
                            <!-- 备份提醒设置 -->
                            <div class="p-4 border border-neutral-dark rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-2">备份提醒</h3>
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="backup-reminder-enabled" class="mr-2">
                                        <label for="backup-reminder-enabled" class="text-sm text-gray-700">启用备份提醒</label>
                                    </div>
                                    <div class="flex items-center">
                                        <label for="backup-reminder-days" class="text-sm text-gray-700 mr-2">提醒间隔:</label>
                                        <input type="number" id="backup-reminder-days" min="1" max="30" 
                                            class="w-16 px-2 py-1 border border-neutral-dark rounded focus:outline-none focus:ring-2 focus:ring-primary">
                                        <span class="text-sm text-gray-700 ml-2">天</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 存储优化设置 -->
                            <div class="p-4 border border-neutral-dark rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-2">存储优化</h3>
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="storage-optimization-enabled" class="mr-2">
                                        <label for="storage-optimization-enabled" class="text-sm text-gray-700">启用自动存储优化</label>
                                    </div>
                                    <div class="flex items-center">
                                        <label for="storage-optimization-threshold" class="text-sm text-gray-700 mr-2">优化阈值:</label>
                                        <input type="number" id="storage-optimization-threshold" min="50" max="90" 
                                            class="w-16 px-2 py-1 border border-neutral-dark rounded focus:outline-none focus:ring-2 focus:ring-primary">
                                        <span class="text-sm text-gray-700 ml-2">%</span>
                                    </div>
                                    <p class="text-xs text-gray-500">当存储使用超过阈值时，系统将自动进行优化</p>
                                </div>
                            </div>
                            
                            <!-- 自动备份设置 -->
                            <div class="p-4 border border-neutral-dark rounded-lg">
                                <h3 class="font-medium text-gray-800 mb-2">自动备份</h3>
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="auto-backup-enabled" class="mr-2">
                                        <label for="auto-backup-enabled" class="text-sm text-gray-700">启用自动内部备份</label>
                                    </div>
                                    <div class="flex items-center">
                                        <label for="auto-backup-interval" class="text-sm text-gray-700 mr-2">备份间隔:</label>
                                        <input type="number" id="auto-backup-interval" min="1" max="30" 
                                            class="w-16 px-2 py-1 border border-neutral-dark rounded focus:outline-none focus:ring-2 focus:ring-primary">
                                        <span class="text-sm text-gray-700 ml-2">天</span>
                                    </div>
                                    <div class="flex items-center">
                                        <label for="auto-backup-keep" class="text-sm text-gray-700 mr-2">保留备份数:</label>
                                        <input type="number" id="auto-backup-keep" min="1" max="5" 
                                            class="w-16 px-2 py-1 border border-neutral-dark rounded focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <p class="text-xs text-gray-500">系统将自动在本地创建内部备份，无需手动下载</p>
                                </div>
                            </div>
                            
                            <div class="flex justify-end">
                                <button type="submit" class="btn btn-primary">保存设置</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
                        <h2 class="text-lg font-medium text-gray-800 mb-4">关于系统</h2>
                        <div class="space-y-2 text-sm text-gray-600">
                            <p>班级积分管理系统 V1.0</p>
                            <p>这是一个用于管理班级学生积分的离线网页应用，所有数据存储在浏览器本地。</p>
                            <p>请定期备份您的数据，以防数据丢失。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 恢复数据模态框 -->
                <div id="restore-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
                    <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">恢复数据</h3>
                        
                        <div class="mb-6">
                            <h4 class="text-md font-medium text-gray-700 mb-2">从备份文件恢复</h4>
                            <p class="text-sm text-gray-600 mb-4">请选择备份文件（.json格式）</p>
                            <input type="file" id="restore-file" accept=".json" 
                                class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        
                        <div class="border-t border-neutral-dark pt-4 mb-6">
                            <h4 class="text-md font-medium text-gray-700 mb-2">从自动内部备份恢复</h4>
                            <div id="internal-backup-info" class="text-sm text-gray-600 mb-4">
                                <!-- 内部备份信息将通过JavaScript动态加载 -->
                                检查中...
                            </div>
                            <button type="button" id="restore-internal-btn" 
                                class="btn btn-secondary w-full">
                                从内部备份恢复
                            </button>
                        </div>
                        
                        <div class="flex justify-end space-x-2 mt-6">
                            <button type="button" id="restore-modal-cancel" 
                                class="btn btn-outline">
                                取消
                            </button>
                            <button type="button" id="restore-modal-submit" 
                                class="btn btn-primary">
                                从文件恢复
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 底部状态栏 -->
    <footer class="bg-white shadow-md fixed bottom-0 left-0 right-0 z-10">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center text-sm text-gray-500">
            <div>班级积分管理系统 V1.0</div>
            <div id="last-backup-info">上次备份时间: 未备份</div>
        </div>
    </footer>

    <!-- 快速积分操作模态框 -->
    <div id="quick-point-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
        <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
            <h3 class="text-lg font-medium text-gray-800 mb-4">快速积分操作</h3>
            <div class="space-y-4">
                <div>
                    <div class="flex items-center">
                        <span class="font-medium mr-2" id="quick-point-student-name">学生姓名</span>
                        <span class="text-sm text-gray-500" id="quick-point-student-id"></span>
                    </div>
                    <div class="flex items-center mt-1">
                        <span class="text-sm text-gray-500 mr-2">当前积分:</span>
                        <span class="font-medium" id="quick-point-current-points">0</span>
                    </div>
                </div>
                <div class="border-t border-neutral-dark pt-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700">选择积分规则:</span>
                        <span class="text-primary text-sm hover:underline cursor-pointer" id="quick-custom-point">自定义积分</span>
                    </div>
                    <div id="quick-point-rules" class="grid grid-cols-2 gap-2">
                        <!-- 积分规则选择将通过JavaScript动态生成 -->
                    </div>
                </div>
                <div id="custom-point-input" class="border-t border-neutral-dark pt-4 hidden">
                    <label for="custom-points-value" class="block text-sm font-medium text-gray-700 mb-1">输入积分值:</label>
                    <div class="flex items-center">
                        <button id="custom-points-minus" class="bg-red-100 text-red-500 px-3 py-1 rounded-l-lg">-</button>
                        <input type="number" id="custom-points-value" value="1" min="1" 
                            class="w-full px-3 py-1 border-y border-neutral-dark focus:outline-none focus:ring-2 focus:ring-primary text-center">
                        <button id="custom-points-plus" class="bg-green-100 text-green-500 px-3 py-1 rounded-r-lg">+</button>
                    </div>
                </div>
                <div>
                    <label for="quick-point-reason" class="block text-sm font-medium text-gray-700 mb-1">备注 (可选):</label>
                    <input type="text" id="quick-point-reason" placeholder="请输入备注信息..." 
                        class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
            </div>
            <div class="flex justify-end space-x-2 mt-6">
                <button type="button" id="quick-point-cancel" 
                    class="btn btn-outline">
                    取消
                </button>
                <button type="button" id="quick-point-confirm" 
                    class="btn btn-primary">
                    确认
                </button>
            </div>
        </div>
    </div>

    
    <!-- 全局小组积分模态框 -->
    <div id="group-point-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
        <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
            <h3 class="text-lg font-medium text-gray-800 mb-4">小组积分操作</h3>
            <form id="group-point-form">
                <div class="space-y-4">
                    <div>
                        <label for="point-group" class="block text-sm font-medium text-gray-700 mb-1">选择小组</label>
                        <select id="point-group" required 
                            class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            <option value="">选择小组...</option>
                            <!-- 小组选项将通过JavaScript动态生成 -->
                        </select>
                    </div>
                    <div>
                        <label for="group-point-rule" class="block text-sm font-medium text-gray-700 mb-1">选择积分规则</label>
                        <select id="group-point-rule" required 
                            class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            <option value="">选择规则...</option>
                            <!-- 规则选项将通过JavaScript动态生成 -->
                        </select>
                    </div>
                    <div>
                        <label for="group-point-reason" class="block text-sm font-medium text-gray-700 mb-1">备注</label>
                        <input type="text" id="group-point-reason" 
                            class="w-full px-3 py-2 border border-neutral-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
                            placeholder="可选，记录积分原因">
                    </div>
                </div>
                <div class="flex justify-end space-x-2 mt-6">
                    <button type="button" id="group-point-modal-cancel" 
                        class="btn btn-outline">
                        取消
                    </button>
                    <button type="submit" 
                        class="btn btn-secondary">
                        确认积分
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 引入JavaScript文件 -->
    <script src="assets/js/app.js"></script>
</body>
</html> 

